<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Real World Vending Machine</title>
  <style>
    body {
      font-family: 'Confortaa', sans-serif;
      margin: 0;
    }
    .navbar {
      background-color: #333;
      overflow: hidden;
    }
    .navbar a {
      float: left;
      color: white;
      text-align: center;
      padding: 14px 16px;
      text-decoration: none;
    }
    .navbar a:hover {
      background-color: #ddd;
      color: black;
    }
    img {
      max-width: 100%;
      height: auto;
      display: block;
      margin: 0 auto;
    }
    .content {
      padding: 20px;
    }
    .image-container {
      text-align: center;
      margin: 20px 0;
    }
    .image-container img {
      max-width: 80%;
      border: 1px solid #ddd;
      padding: 5px;
      border-radius: 5px;
    }
    pre {
      background-color: #f4f4f4;
      border: 1px solid #ddd;
      padding: 10px;
      overflow-x: auto;
    }
    code {
      color: #050505;
      background-color: #f9f2f4;
      padding: 2px 4px;
      border-radius: 4px;
    }
    h1, h2, h3 {
      color: #333;
    }
    hr {
      border: 0;
      border-top: 1px solid #ddd;
      margin: 20px 0;
    }
  </style>
</head>
<body>
  <div class="navbar">
    <a href="../index.html">Home</a>
    <a href="../about.html">About</a>
    <a href="../posts.html">Projects</a>
  </div>
  <div class="content">
    <h1>TEJ Traffic Light</h1>
    <p class="author"><strong>By:</strong> Sanchit Khope</p>
    <hr>
    <h2>Explanation of the Project</h2>
    <p>
      Our task for this project was to create a project using all of the skills and knowledge from the last 6 months. 
      The project we chose to make was the traffic light, using a Raspberry Pi 4b to code it. My logic behind this project was to use 
      threads, a module in Python, to run tasks concurrently. Also to use the time module to delay the LEDs in the sequence.
    </p>
    <ul>
      <li>If the pedestrian button is pressed, it starts a sequence with the pedestrian LED on, then reverts to the original sequence without the pedestrian lights.</li>
      <li>Once the pedestrian LED is on, it starts the other pedestrian light. This resembles a real stoplight.</li>
      <li>There is also a left turn signal that activates every time, resembling real-life traffic lights.</li>
      <li>It also prints the color it is on, inside the terminal, so you can also keep track of it there.</li>
    </ul>
    <p>
      This project may look simple; however, the timing of the sequences is quite complex. 
      To control the LEDs, I used <code>GPIOZero</code>, which is a simpler form of <code>RPI.GPIO</code>.
    </p>
    <hr>
    <h2>Inputs</h2>
    <p>My inputs were <strong>4 push buttons</strong> on the poles, acting as pedestrian buttons.</p>
    <hr>
    <h3>Final Image</h3>
    <img src="videos/Traffic-Light-Photo.jpg" alt="Traffic-Light-Photo" style="width: 300px; height: 380px;">
    <hr>
    <h2>Bare Circuit</h2>
    <video width="100%" height="500px" controls>
      <source src="videos/traffic_breadboard.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>
    <hr>
    <h2>Final Working Video</h2>
    <video width="100%" height="500px" controls>
      <source src="videos/Traffic-Light-Working.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>
    <hr>
    <h2>Python Code</h2>
    <pre><code>
import time
import threading
from gpiozero import LED, Button

input_received = threading.Event()
pedestrian_active = threading.Event()
normal_run_pause = threading.Event()
leftturndone = threading.Event()

led = LED(17)
gled = LED(27)
yled = LED(22)
rled = LED(23)
gled2 = LED(24)
yled2 = LED(25)
pled1 = LED(16)
pled1red = LED(26)
pled2 = LED(15)
pled2red = LED(14)
leftturn1 = LED(6)
crossbutton = Button(5)

def leftturn():
    print("Color 1: Left Turn On")
    leftturn1.on()
    time.sleep(2)
    print("Color 1: Left Turn Off")
    leftturn1.off()

# (Code truncated for brevity)
normalrun()
    </code></pre>
  </div>
</body>
</html>
